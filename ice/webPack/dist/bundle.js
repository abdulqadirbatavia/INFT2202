(()=>{var e={375:(e,t,n)=>{e.exports=n.p+"img/twitter.22c7fa704ca950408ad7f1632f5b8183.svg"}},t={};function n(a){var s=t[a];if(void 0!==s)return s.exports;var r=t[a]={exports:{}};return e[a](r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var a=t.getElementsByTagName("script");if(a.length)for(var s=a.length-1;s>-1&&(!e||!/^http(s?):/.test(e));)e=a[s--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),(()=>{"use strict";const e=new t({host:"https://inft2202-server.onrender.com/",user:"0000"});function t({host:e,user:t}){this.host=e,this.headers=new Headers({"Content-Type":"application/json",user:t})}t.prototype.findAnimal=async function(e){const t=new URL(`/api/animals/${encodeURIComponent(e)}`,this.host),n=new Request(t,{headers:this.headers,method:"GET"});try{return(await fetch(n)).json()}catch(e){return!1}},t.prototype.getAnimalPage=async function({page:e=1,perPage:t=8}){const n=new URLSearchParams({page:e,perPage:t}),a=new URL(`/api/animals?${n.toString()}`,this.host),s=new Request(a,{headers:this.headers,method:"GET"});try{return(await fetch(s)).json()}catch(e){return!1}},t.prototype.saveAnimal=async function(e){const t=new URL("/api/animals",this.host),n=new Request(t,{headers:this.headers,method:"POST",body:JSON.stringify(e)});try{return(await fetch(n)).json()}catch(e){return!1}},t.prototype.updateAnimal=async function(e){const t=new URL("/api/animals",this.host),n=new Request(t,{headers:this.headers,method:"PUT",body:JSON.stringify(e)});try{return(await fetch(n)).json()}catch(e){return!1}},t.prototype.deleteAnimal=async function(e){const t=new URL(`/api/animals/${e}`,this.host),n=new Request(t,{headers:this.headers,method:"DELETE"});try{return 204===(await fetch(n)).status}catch(e){return!1}};const a=function(t){const{recordPage:n,animalBuilder:a}=t,s=document.createElement("div");s.classList.add("container");const r=document.createElement("div");r.classList.add("text-center"),r.innerHTML='<i class="fa fa-5x fa-spinner fa-spin"></i>',s.append(r);const o=document.createElement("div");function i(t){return n=>{e.deleteAnimal(t.name).then((()=>{window.location.reload()}))}}function l(e){return n=>{t.name=e.name,a(t)}}function c(t){return r.classList.remove("d-none"),e.getAnimalPage(t).then((e=>{s.textContent="";let{records:t,pagination:n}=e;r.classList.add("d-none");let a=document.createElement("div");a.classList.add("d-flex","justify-content-between");let o=document.createElement("h1");o.innerHTML="Animal List",a.append(o),a.append(function({page:e=1,perPage:t=5,pages:n=10}){function a(e,n,a){const s=document.createElement("li");s.classList.add("page-item",a);const r=document.createElement("button");r.classList.add("page-link"),r.innerText=n;let o={page:e,perPage:t};return r.addEventListener("click",function(e){return t=>{c(e)}}(o)),s.append(r),s}const s=document.createElement("div");n>1&&s.classList.remove("d-none");const r=document.createElement("ul");r.classList.add("pagination"),r.append(a(e-1,"Previous",1==e?"disabled":null));for(let t=1;t<=n;t++)r.append(a(t,t,t==e?"active":null));return r.append(a(e+1,"Next",e==n?"disabled":null)),s.append(r),s}(n)),s.append(a),s.append(function(e){const t=document.createElement("table");t.classList.add("table","table-striped");const n=t.createTHead().insertRow();["Name","Breed","Legs","Eyes","Sound"].forEach((e=>{const t=document.createElement("th");t.textContent=e,n.appendChild(t)}));for(let n of e){const e=t.insertRow();e.insertCell().textContent=n.name,e.insertCell().textContent=n.breed,e.insertCell().textContent=n.legs,e.insertCell().textContent=n.eyes,e.insertCell().textContent=n.sound;const a=e.insertCell();a.classList.add();const s=document.createElement("button");s.classList.add("btn","btn-danger","mx-1"),s.innerHTML='<i class="fa fa-trash"></i>',s.addEventListener("click",i(n)),a.append(s);const r=document.createElement("button");r.classList.add("btn","btn-primary","mx-1"),r.innerHTML='<i class="fa fa-user"></i>',r.addEventListener("click",l(n)),a.append(r)}return t}(t))})).catch((e=>{r.classList.add("d-none"),o.innerHTML=e,o.classList.remove("d-none"),o.classList.add("alert-danger")})),s}return o.classList.add("alert","text-center","d-none"),s.append(o),{element:c(n)}};var s=n(375),r=n.n(s),o={recordPage:{page:1,perPage:10},name:null,animalBuilder:function(t){l.innerHTML="",l.append(function(t){const{name:n,listBuilder:a}=t,s=document.createElement("div");s.classList.add("container");let r=document.createElement("h1");r.innerHTML="Add Animal",s.append(r),s.append(document.createElement("hr"));const o=document.createElement("form");let i=null;function l(){const e=document.createElement("div");e.classList.add("mb-2");const t=document.createElement("div");t.classList.add("mb-3");let n=`<input type="text" class="form-control" id="name" name="name" value="${null!=i?i.name:""}" readonly>`;t.innerHTML='<label for="name" class="form-label">Animal Name</label>'+(null!=i?n:'<input type="text" class="form-control" id="name" name="name">')+'<p class="text-danger d-none"></p>',e.append(t);const a=document.createElement("div");a.classList.add("mb-3"),a.innerHTML=`<label for="breed" class="form-label">Animal Breed</label><input type="text" class="form-control" id="breed" name="breed" value="${null!=i?i.breed:""}"><p class="text-danger d-none"></p>`,e.append(a);const r=document.createElement("div");r.classList.add("mb-3"),r.innerHTML='<label for="legs" class="form-label">Number of Legs</label><input type="text" class="form-control" id="legs" name="legs"><p class="text-danger d-none"></p>',e.append(r);const l=document.createElement("div");l.classList.add("mb-3"),l.innerHTML='<label for="eyes" class="form-label">Number of Eyes</label><input type="text" class="form-control" id="eyes" name="eyes"><p class="text-danger d-none"></p>',e.append(l);const c=document.createElement("div");c.classList.add("mb-3"),c.innerHTML='<label for="sound" class="form-label">Sound this animal makes</label><input type="text" class="form-control" id="sound" name="sound"><p class="text-danger d-none"></p>',e.append(c);const d=document.createElement("div");return d.innerHTML='<button type="submit" class="btn btn-primary">Save Animal <i class="fa-solid fa-check"></i></button>',e.append(d),o.append(e),s.append(o),s}function c(n){const s=function(){let e=!0;const t=o.name.value,n=o.name.nextElementSibling;""==t?(n.classList.remove("d-none"),n.textContent="You must name this animal!",e=!1):n.classList.add("d-none");const a=o.breed.value,s=o.breed.nextElementSibling;""==a?(s.classList.remove("d-none"),s.textContent="What type of animal is this?",e=!1):s.classList.add("d-none");const r=o.legs.value,i=o.legs.nextElementSibling;return""==r?(i.classList.remove("d-none"),i.textContent="How many legs does this animal have?",e=!1):isNaN(r)?(i.classList.remove("d-none"),i.textContent="This must be a number.",e=!1):i.classList.add("d-none"),o.eyes.value,o.sound.value,e}();if(s){const s=new FormData(o),r={};s.forEach(((e,t)=>{r[t]="eyes"===t||"legs"===t?Number(e):e}));const i=o.name.nextElementSibling;"new"==n?e.saveAnimal([r]).then((e=>{a(t)})).catch((e=>{i.classList.remove("d-none"),i.textContent="Err in adding an animal record!"})):e.updateAnimal(r).then((e=>{a(t)})).catch((e=>{i.classList.remove("d-none"),i.textContent="Err in updating animal record!"})),i.classList.add("d-none")}else console.log("were not good")}return n?(r.innerText="Update Animal",e.findAnimal(n).then((e=>{if(0==e.length)throw"No record";i=e[0],l(),o.addEventListener("submit",(function(e){e.preventDefault(),c("update")}))})).catch((e=>{r.innerHTML=e}))):(l(),o.addEventListener("submit",(function(e){e.preventDefault(),c("new")}))),{element:s}}(t).element)},listBuilder:function(e){l.innerHTML="",l.append(a(e).element)}};const i=a(o);let l=document.querySelector("main");l.append(i.element);let c=document.querySelector(".ms-3 a");const d=document.createElement("img");d.src=r(),d.width=24,d.height=24,c.appendChild(d)})()})();
//# sourceMappingURL=bundle.js.map